{"version":3,"sources":["webpack:///src/page/smallcity/Scity.vue","webpack:///./src/page/smallcity/Scity.vue?525c","webpack:///./src/page/smallcity/Scity.vue"],"names":["Scity","components","Head","data","where","num","iut","list","str","bool","bol","bal","names","methods","getsearch","this","that","http","get","then","res","length","getpush","index","obj","name","address","geohash","localStorage","getItem","JSON","parse","unshift","setItem","stringify_default","filter","item","Obj","latitude","longitude","push","gethide","geta","mounted","created","$route","params","id","smallcity_Scity","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","headback","_v","directives","rawName","value","expression","type","placeholder","domProps","on","input","$event","target","composing","click","_l","key","tag","to","path","query","_s","_e","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"gIA2CAA,GACAC,YACAC,eAAA,GAEAC,KAJA,WAKA,OACAC,MAAA,GACAC,IAAA,EACAC,IAAA,GACAC,QACAC,OACAC,MAAA,EACAC,KAAA,EACAC,KAAA,EACAC,WAGAC,SAEAC,UAFA,WAGA,OAAAC,KAAAT,IAAA,CACA,IAAAU,EAAAD,KACAA,KAAAE,KACAC,IACA,qDACAH,KAAAV,IACA,YACAU,KAAAT,KAEAa,KAAA,SAAAC,GAEA,GAAAA,EAAAC,OACAL,EAAAL,KAAA,GAEAK,EAAAT,KAAAa,EACAJ,EAAAL,KAAA,KAGAI,KAAAN,MAAA,IAIAa,QAzBA,SAyBAC,GACA,IAAAC,MACAA,EAAAC,KAAAV,KAAAR,KAAAgB,GAAAE,KACAD,EAAAE,QAAAX,KAAAR,KAAAgB,GAAAG,QACAF,EAAAG,QAAAZ,KAAAR,KAAAgB,GAAAI,QACAC,aAAAC,QAAA,aAEAd,KAAAP,IAAAsB,KAAAC,MAAAH,aAAAC,QAAA,aAGA,GAAAd,KAAAP,IAAAa,SACAN,KAAAP,IAAAwB,QAAAR,GACAI,aAAAK,QAAA,UAAAC,IAAAnB,KAAAP,OAKA,GAHAO,KAAAP,IAAA2B,OAAA,SAAAC,GACA,OAAAA,EAAAX,MAAAD,EAAAC,MAAAW,EAAAV,SAAAF,EAAAE,UAEAL,SACAN,KAAAP,IAAAwB,QAAAR,GACAI,aAAAK,QAAA,UAAAC,IAAAnB,KAAAP,OAGAO,KAAAH,SACA,IAAAyB,KACAA,EAAAZ,KAAAV,KAAAR,KAAAgB,GAAAE,KACAY,EAAAV,QAAAZ,KAAAR,KAAAgB,GAAAI,QACAH,EAAAc,SAAAvB,KAAAR,KAAAgB,GAAAe,SACAd,EAAAe,UAAAxB,KAAAR,KAAAgB,GAAAgB,UACAxB,KAAAH,MAAA4B,KAAAH,GACAT,aAAAK,QAAA,OAAAC,IAAAnB,KAAAH,SAGA6B,QAzDA,WA0DA1B,KAAAP,OACAoB,aAAAK,QAAA,UAAAC,IAAAnB,KAAAP,MACAO,KAAAL,KAAA,GAEAgC,KA9DA,SA8DAnB,GACAR,KAAAH,SACA,IAAAyB,KACAA,EAAAZ,KAAAV,KAAAP,IAAAe,GAAAE,KACAY,EAAAV,QAAAZ,KAAAP,IAAAe,GAAAI,QACAZ,KAAAH,MAAA4B,KAAAH,GACAT,aAAAK,QAAA,OAAAC,IAAAnB,KAAAH,UAGA+B,QAxFA,WAyFAf,aAAAC,QAAA,aACAd,KAAAP,IAAAsB,KAAAC,MAAAH,aAAAC,QAAA,aAEA,GAAAd,KAAAP,IAAAa,OACAN,KAAAL,KAAA,EAEAK,KAAAL,KAAA,GAGAkC,QAlGA,WAmGA,IAAAxC,EAAAW,KAAA8B,OAAAC,OAAArB,KACAV,KAAAX,QACA,IAAAC,EAAAU,KAAA8B,OAAAC,OAAAC,GACAhC,KAAAV,QC9Ie2C,GADEC,OAFjB,WAA0B,IAAAC,EAAAnC,KAAaoC,EAAAD,EAAAE,eAA0BC,EAAAH,EAAAI,MAAAD,IAAAF,EAAwB,OAAAE,EAAA,OAAiBE,YAAA,UAAoBF,EAAA,QAAaG,OAAOC,SAAA,WAAoBP,EAAAQ,GAAA,KAAAL,EAAA,OAAwBE,YAAA,YAAsBF,EAAA,OAAYE,YAAA,SAAmBF,EAAA,SAAcM,aAAalC,KAAA,QAAAmC,QAAA,UAAAC,MAAAX,EAAA,IAAAY,WAAA,QAAgEN,OAASO,KAAA,OAAAC,YAAA,eAA0CC,UAAWJ,MAAAX,EAAA,KAAkBgB,IAAKC,MAAA,SAAAC,GAAyBA,EAAAC,OAAAC,YAAsCpB,EAAA5C,IAAA8D,EAAAC,OAAAR,WAA8BX,EAAAQ,GAAA,KAAAL,EAAA,UAA2Ba,IAAIK,MAAA,SAAAH,GAAyB,OAAAlB,EAAApC,gBAAyBoC,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAR,EAAA,KAAAG,EAAA,OAAoDE,YAAA,YAAsBF,EAAA,KAAUE,YAAA,WAAqBL,EAAAQ,GAAA,UAAAR,EAAAQ,GAAA,KAAAL,EAAA,OAAyCE,YAAA,WAAqBF,EAAA,KAAAH,EAAAsB,GAAAtB,EAAA,aAAAd,EAAAb,GAAgD,OAAA8B,EAAA,eAAyBoB,IAAAlD,EAAAiC,OAAiBkB,IAAA,KAAAC,IAAiBC,KAAA,QAAAC,OAAoBlD,QAAAS,EAAAT,aAAwB0B,EAAA,OAAYa,IAAIK,MAAA,SAAAH,GAAyB,OAAAlB,EAAAR,KAAAnB,OAAyB8B,EAAA,MAAAH,EAAAQ,GAAAR,EAAA4B,GAAA1C,EAAAX,SAAAyB,EAAAQ,GAAA,KAAAL,EAAA,KAA2DE,YAAA,WAAqBL,EAAAQ,GAAAR,EAAA4B,GAAA1C,EAAAV,kBAAqC,GAAAwB,EAAAQ,GAAA,KAAAR,EAAA,IAAAG,EAAA,KAAmCa,IAAIK,MAAA,SAAAH,GAAyB,OAAAlB,EAAAT,cAAuBS,EAAAQ,GAAA,UAAAR,EAAA6B,SAAA7B,EAAA6B,KAAA7B,EAAAQ,GAAA,KAAAR,EAAAzC,KAA4fyC,EAAA6B,KAA5f1B,EAAA,OAA2EE,YAAA,YAAsBF,EAAA,MAAAH,EAAAsB,GAAAtB,EAAA,cAAAd,EAAAb,GAAkD,OAAA2B,EAAAvC,IAAuQuC,EAAA6B,KAAvQ1B,EAAA,eAAoCoB,IAAAlD,EAAAiC,OAAiBkB,IAAA,KAAAC,IAAiBC,KAAA,QAAAC,OAAoBlD,QAAAS,EAAAT,aAAwB0B,EAAA,OAAYa,IAAIK,MAAA,SAAAH,GAAyB,OAAAlB,EAAA5B,QAAAC,OAA4B8B,EAAA,MAAAH,EAAAQ,GAAAR,EAAA4B,GAAA1C,EAAAX,SAAAyB,EAAAQ,GAAA,KAAAL,EAAA,KAA2DE,YAAA,WAAqBL,EAAAQ,GAAAR,EAAA4B,GAAA1C,EAAAV,kBAA8CwB,EAAAQ,GAAA,KAAAR,EAAA,IAAAG,EAAA,MAAiCE,YAAA,SAAmBL,EAAAQ,GAAA,wDAAAR,EAAA6B,MAAA,YAExoDC,oBCCjB,IAcAC,EAdyBC,EAAQ,OAcjCC,CACEnF,EACAgD,GATF,EAVA,SAAAoC,GACEF,EAAQ,SAaV,kBAEA,MAUeG,EAAA,QAAAJ,EAAiB","file":"static/js/8.456f432eb7ad159f5a74.js","sourcesContent":["<template>\r\n    <div class=\"scity\">\r\n        <Head headback=\"false\"></Head>\r\n        <div class=\"content\">\r\n            <div class=\"main\">\r\n                <input type=\"text\" placeholder=\"输入学校、商务楼、地址\" v-model=\"iut\"/>\r\n                <button @click=\"getsearch()\">提交</button>\r\n            </div>\r\n            <div class=\"history\" v-if=\"bool\">\r\n                <p class=\"his-p1\">搜索历史</p>\r\n                <div class=\"his-p2\">\r\n                    <ul>\r\n                        <router-link v-for='(item,index) of str'  :key='index' tag='li'  :to=\"{path:'/Home',query:{geohash:item.geohash}}\">\r\n                          <div @click=\"geta(index)\">\r\n                            <h4>{{item.name}}</h4>\r\n                            <p class=\"his-s1\">{{item.address}}</p>\r\n                          </div>\r\n                            \r\n                        </router-link>\r\n                    </ul>\r\n                    <p v-if='bol' @click=\"gethide()\">清空记录</p>\r\n                </div>\r\n            </div>\r\n            <div class=\"address\" v-if=\"!bool\">\r\n                    <ul>\r\n                        <router-link v-for='(item,index) of list' v-if=\"!bal\" :key='index' tag='li'  :to=\"{path:'/Home',query:{geohash:item.geohash}}\">\r\n                          <div @click=\"getpush(index)\">\r\n                            <h4>{{item.name}}</h4>\r\n                            <p class=\"his-s1\">{{item.address}}</p>\r\n                            </div> \r\n                            \r\n                        </router-link>\r\n                        <li class=\"none\" v-if=\"bal\">\r\n                          暂无数据\r\n                        </li>\r\n                    </ul>\r\n            </div>\r\n        </div>\r\n    </div>\r\n</template>\r\n\r\n<script>\r\nimport Head from \"./../header/Head.vue\"\r\nexport default {\r\n  components: {\r\n    Head\r\n  },\r\n  data() {\r\n    return {\r\n      where: \"\",\r\n      num: 0,\r\n      iut: \"\",\r\n      list: [],\r\n      str: [],\r\n      bool: true,\r\n      bol: false,\r\n      bal: false,\r\n      names:[]\r\n    };\r\n  },\r\n  methods: {\r\n    //点击提交，获取接口数据\r\n    getsearch() {\r\n      if (this.iut != \"\") {\r\n        var that = this;\r\n        this.http\r\n          .get(\r\n            \"http://elm.cangdu.org/v1/pois?type=search&city_id=\" +\r\n              this.num +\r\n              \"&keyword=\" +\r\n              this.iut\r\n          )\r\n          .then(res => {\r\n            // console.log(res);\r\n            if (res.length == 0) {\r\n              that.bal = true;\r\n            } else {\r\n              that.list = res;\r\n              that.bal = false;\r\n            }\r\n          });\r\n        this.bool = false;\r\n      }\r\n    },\r\n    //点击地址时，把地址传给str数组，并本地保存，并判断地址和搜索地址是否一致，也就是去重\r\n    getpush(index) {\r\n      var obj = {};\r\n      obj.name = this.list[index].name;\r\n      obj.address = this.list[index].address;\r\n      obj.geohash=this.list[index].geohash\r\n      if (localStorage.getItem(\"getpush\")) {\r\n        \r\n        this.str = JSON.parse(localStorage.getItem(\"getpush\"));\r\n      \r\n      }\r\n     if (this.str.length == 0) {\r\n          this.str.unshift(obj);\r\n          localStorage.setItem(\"getpush\", JSON.stringify(this.str));\r\n        }else{\r\n           var r =this.str.filter(item => {\r\n          return item.name == obj.name && item.address == obj.address;\r\n        });\r\n        if (r.length == 0) {\r\n          this.str.unshift(obj);\r\n          localStorage.setItem(\"getpush\", JSON.stringify(this.str));\r\n        }\r\n        }\r\n      this.names=[]\r\n       var Obj={}\r\n      Obj.name=this.list[index].name\r\n      Obj.geohash=this.list[index].geohash\r\n      obj.latitude=this.list[index].latitude\r\n      obj.longitude=this.list[index].longitude\r\n      this.names.push(Obj)\r\n      localStorage.setItem('geta',JSON.stringify(this.names))\r\n    },\r\n    //点击后，清空str数组\r\n    gethide() {\r\n      this.str = [];\r\n      localStorage.setItem(\"getpush\", JSON.stringify(this.str));\r\n      this.bol = false;\r\n    },\r\n    geta(index){\r\n       this.names=[]\r\n       var Obj={}\r\n      Obj.name=this.str[index].name\r\n      Obj.geohash=this.str[index].geohash\r\n      this.names.push(Obj)\r\n      localStorage.setItem('geta',JSON.stringify(this.names))\r\n    }\r\n  },\r\n  mounted() {\r\n    if (localStorage.getItem(\"getpush\")) {\r\n      this.str = JSON.parse(localStorage.getItem(\"getpush\"));\r\n    }\r\n    if (this.str.length == 0) {\r\n      this.bol = false;\r\n    } else {\r\n      this.bol = true;\r\n    }\r\n  },\r\n  created() {\r\n    let where = this.$route.params.name;\r\n    this.where = where;\r\n    let num = this.$route.params.id;\r\n    this.num = num;\r\n  }\r\n};\r\n</script>\r\n\r\n<style lang=\"scss\" scoped>\r\n.scity {\r\n  width: 100%;\r\n  height: 100%;\r\n}\r\n.content {\r\n  width: 100%;\r\n  height: auto;\r\n  padding-top: 1rem;\r\n  background: white;\r\n  .main {\r\n    width: 100%;\r\n    height: 1.98rem;\r\n    border-top: 0.01rem solid #ccc;\r\n    border-bottom: 0.01rem solid #ccc;\r\n    input {\r\n      width: 6.62rem;\r\n      height: 0.58rem;\r\n      border: 0.01rem solid #ccc;\r\n      outline: none;\r\n      border-radius: 0.04rem;\r\n      padding-left: 0.1rem;\r\n      font-size: 0.3rem;\r\n      display: block;\r\n      margin: 0 auto;\r\n      margin-top: 0.22rem;\r\n    }\r\n    button {\r\n      width: 6.74rem;\r\n      height: 0.6rem;\r\n      border: none;\r\n      color: white;\r\n      background: #3792e5;\r\n      display: block;\r\n      border-radius: 0.04rem;\r\n      margin: 0 auto;\r\n      margin-top: 0.22rem;\r\n      outline: none;\r\n      font-size: 0.34rem;\r\n    }\r\n  }\r\n  .history {\r\n    width: 100%;\r\n    height: auto;\r\n    .his-p1 {\r\n      width: 7.4rem;\r\n      height: 0.3rem;\r\n      border-bottom: 0.01rem solid #ccc;\r\n      font-size: 0.12rem;\r\n      padding-left: 0.1rem;\r\n      background: #f5f5f5;\r\n      text-align: left;\r\n      line-height: 0.3rem;\r\n    }\r\n    .his-p2 {\r\n      width: 100%;\r\n      height: auto;\r\n      ul {\r\n        width: 100%;\r\n        height: auto;\r\n        li {\r\n          width: 100%;\r\n          height: 1.12rem;\r\n          border-bottom: 0.01rem solid #ccc;\r\n          padding-top: 0.3rem;\r\n          text-align: left;\r\n          h4 {\r\n            width: 6.75rem;\r\n            height: 0.4rem;\r\n            margin: 0 auto;\r\n            font-size: 0.3rem;\r\n            margin-bottom: 0.16rem;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n          }\r\n          .his-s1 {\r\n            width: 6.75rem;\r\n            height: 0.28rem;\r\n            margin: 0 auto;\r\n            font-size: 0.24rem;\r\n            color: #999;\r\n            overflow: hidden;\r\n            text-overflow: ellipsis;\r\n            white-space: nowrap;\r\n            line-height: 0.28rem;\r\n          }\r\n        }\r\n      }\r\n      p {\r\n        width: 100%;\r\n        height: 0.8rem;\r\n        font-size: 0.4rem;\r\n        line-height: 0.8rem;\r\n      }\r\n    }\r\n  }\r\n  .address {\r\n    width: 100%;\r\n    height: auto;\r\n    background: white;\r\n    ul {\r\n      width: 100%;\r\n      height: auto;\r\n      li {\r\n        width: 100%;\r\n        height: 1.12rem;\r\n        border-bottom: 0.01rem solid #ccc;\r\n        padding-top: 0.3rem;\r\n        text-align: left;\r\n        h4 {\r\n          width: 6.75rem;\r\n          height: 0.4rem;\r\n          margin: 0 auto;\r\n          margin-bottom: 0.16rem;\r\n          font-size: 0.3rem;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n        .his-s1 {\r\n          width: 6.75rem;\r\n          height: 0.28rem;\r\n          margin: 0 auto;\r\n          font-size: 0.24rem;\r\n          color: #999;\r\n          overflow: hidden;\r\n          text-overflow: ellipsis;\r\n          white-space: nowrap;\r\n        }\r\n      }\r\n      .none {\r\n        font-size: 0.4rem;\r\n        text-align: center;\r\n      }\r\n    }\r\n  }\r\n}\r\n</style>\r\n\n\n\n// WEBPACK FOOTER //\n// src/page/smallcity/Scity.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"scity\"},[_c('Head',{attrs:{\"headback\":\"false\"}}),_vm._v(\" \"),_c('div',{staticClass:\"content\"},[_c('div',{staticClass:\"main\"},[_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.iut),expression:\"iut\"}],attrs:{\"type\":\"text\",\"placeholder\":\"输入学校、商务楼、地址\"},domProps:{\"value\":(_vm.iut)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.iut=$event.target.value}}}),_vm._v(\" \"),_c('button',{on:{\"click\":function($event){return _vm.getsearch()}}},[_vm._v(\"提交\")])]),_vm._v(\" \"),(_vm.bool)?_c('div',{staticClass:\"history\"},[_c('p',{staticClass:\"his-p1\"},[_vm._v(\"搜索历史\")]),_vm._v(\" \"),_c('div',{staticClass:\"his-p2\"},[_c('ul',_vm._l((_vm.str),function(item,index){return _c('router-link',{key:index,attrs:{\"tag\":\"li\",\"to\":{path:'/Home',query:{geohash:item.geohash}}}},[_c('div',{on:{\"click\":function($event){return _vm.geta(index)}}},[_c('h4',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"his-s1\"},[_vm._v(_vm._s(item.address))])])])}),1),_vm._v(\" \"),(_vm.bol)?_c('p',{on:{\"click\":function($event){return _vm.gethide()}}},[_vm._v(\"清空记录\")]):_vm._e()])]):_vm._e(),_vm._v(\" \"),(!_vm.bool)?_c('div',{staticClass:\"address\"},[_c('ul',[_vm._l((_vm.list),function(item,index){return (!_vm.bal)?_c('router-link',{key:index,attrs:{\"tag\":\"li\",\"to\":{path:'/Home',query:{geohash:item.geohash}}}},[_c('div',{on:{\"click\":function($event){return _vm.getpush(index)}}},[_c('h4',[_vm._v(_vm._s(item.name))]),_vm._v(\" \"),_c('p',{staticClass:\"his-s1\"},[_vm._v(_vm._s(item.address))])])]):_vm._e()}),_vm._v(\" \"),(_vm.bal)?_c('li',{staticClass:\"none\"},[_vm._v(\"\\n                      暂无数据\\n                    \")]):_vm._e()],2)]):_vm._e()])],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler?{\"id\":\"data-v-7acec07c\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/_vue-loader@13.7.3@vue-loader/lib/selector.js?type=template&index=0!./src/page/smallcity/Scity.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/_extract-text-webpack-plugin@3.0.2@extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-7acec07c\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=styles&index=0!./Scity.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Scity.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=script&index=0!./Scity.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-7acec07c\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/_vue-loader@13.7.3@vue-loader/lib/selector?type=template&index=0!./Scity.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-7acec07c\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/page/smallcity/Scity.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}