webpackJsonp([13],{HE56:function(s,e,t){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var a=t("3cXf"),r=t.n(a),o=t("qvKF"),n=t("Muz9"),i=t.n(n);i.a.defaults.withCredentials=!0;var p={components:{Head:o.a},data:function(){return{warnbol:!0,provingimg:"",warn:"",username:"",oldpassword:"",newpassword:"",newpassword1:"",proving:""}},methods:{getpro:function(){var s=this;this.http.post("http://elm.cangdu.org/v1/captchas",{}).then(function(e){console.log(e.code),""!=e.code&&(s.provingimg=e.code)})},getbtn:function(){this.warnbol=!0,"密码修改成功"==this.warn&&this.$router.push({path:"/User"})},register:function(){var s=this;""!=this.username&&""!=this.oldpassword&&""!=this.newpassword&&""!=this.newpassword1&&this.newpassword==this.newpassword1&&""!=this.proving&&i.a.post("http://elm.cangdu.org/v2/changepassword",{captcha_code:this.proving,confirmpassword:this.newpassword1,newpassword:this.newpassword,oldpassWord:this.oldpassword,username:this.username}).then(function(e){if(0==e.status&&("密码不正确"==e.message&&(s.warnbol=!1,s.warn="密码不正确",s.getpro()),"验证码不正确"==e.message&&(s.warnbol=!1,s.warn="验证码不正确",s.getpro()),"未找到当前用户"==e.message&&(s.warnbol=!1,s.warn="未找到当前用户",s.getpro())),1==e.status&&"密码修改成功"==e.success&&(s.warnbol=!1,s.warn="密码修改成功",s.getpro(),localStorage.getItem("vuex")))for(var t in s.$store.state.users=JSON.parse(localStorage.getItem("vuex")),s.$store.state.users.users)s.$store.state.users.users[t].pass=s.newpassword,localStorage.setItem("vuex",r()(s.$store.state.users))}),""==this.username&&(this.warnbol=!1,this.warn="请输入正确的账号",this.getpro()),""!=this.username&&""==this.oldpassword&&(this.warnbol=!1,this.warn="请输入旧密码",this.getpro()),""!=this.username&&""!=this.oldpassword&&""==this.newpassword&&(this.warnbol=!1,this.warn="请输入新密码",this.getpro()),""!=this.username&&""!=this.oldpassword&&""!=this.newpassword&&""==this.newpassword1&&(this.warnbol=!1,this.warn="请确认新密码",this.getpro()),""!=this.username&&""!=this.oldpassword&&this.newpassword!=this.newpassword1&&(this.warnbol=!1,this.warn="两次输入的密码不一致",this.getpro()),""!=this.username&&""!=this.oldpassword&&""!=this.newpassword&&""!=this.newpassword1&&""==this.proving&&(this.warnbol=!1,this.warn="请输入验证码",this.getpro())}},mounted:function(){this.getpro()}},d={render:function(){var s=this,e=s.$createElement,t=s._self._c||e;return t("div",[t("Head",{attrs:{bol:"重置密码",headback:"false",headto:"false"}}),s._v(" "),t("div",{staticClass:"main"},[t("ul",{staticClass:"login"},[t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.username,expression:"username"}],attrs:{type:"text",placeholder:"账号"},domProps:{value:s.username},on:{input:function(e){e.target.composing||(s.username=e.target.value)}}})]),s._v(" "),t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.oldpassword,expression:"oldpassword"}],attrs:{type:"text",placeholder:"旧密码"},domProps:{value:s.oldpassword},on:{input:function(e){e.target.composing||(s.oldpassword=e.target.value)}}})]),s._v(" "),t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.newpassword,expression:"newpassword"}],attrs:{type:"text",placeholder:"请输入新密码"},domProps:{value:s.newpassword},on:{input:function(e){e.target.composing||(s.newpassword=e.target.value)}}})]),s._v(" "),t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.newpassword1,expression:"newpassword1"}],attrs:{type:"text",placeholder:"请确认密码"},domProps:{value:s.newpassword1},on:{input:function(e){e.target.composing||(s.newpassword1=e.target.value)}}})]),s._v(" "),t("li",[t("input",{directives:[{name:"model",rawName:"v-model",value:s.proving,expression:"proving"}],attrs:{type:"text",placeholder:"验证码"},domProps:{value:s.proving},on:{input:function(e){e.target.composing||(s.proving=e.target.value)}}}),s._v(" "),t("div",{staticClass:"provings"},[t("img",{attrs:{src:s.provingimg,alt:""}}),s._v(" "),t("div",[t("p",[s._v("看不清")]),s._v(" "),t("p",{on:{click:function(e){return s.getpro()}}},[s._v("换一张")])])])])]),s._v(" "),t("button",{on:{click:function(e){return s.register()}}},[s._v("确认修改")]),s._v(" "),s.warnbol?s._e():t("div",{staticClass:"modals"},[s._m(0),s._v(" "),t("div",{staticClass:"warn-con"},[s._v(s._s(s.warn))]),s._v(" "),t("div",{staticClass:"btn",on:{click:function(e){return s.getbtn()}}},[s._v("确定")])])])],1)},staticRenderFns:[function(){var s=this.$createElement,e=this._self._c||s;return e("div",{staticClass:"warn"},[e("span"),this._v(" "),e("span")])}]};var l=t("C7Lr")(p,d,!1,function(s){t("P9ld")},"data-v-2d48c16f",null);e.default=l.exports},P9ld:function(s,e){}});
//# sourceMappingURL=13.95f6c0b17e7c0af3d209.js.map