webpackJsonp([11],{"Y//O":function(t,s){},mnGC:function(t,s,e){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=e("3cXf"),i=e.n(a),o=e("qvKF"),r=e("qKac"),h={components:{Head:o.a,Foot:r.a},data:function(){return{txt:"",bool:!1,geohash:0,merchant:[],bol:!0,bal:!0,searchhistory:[],searchbol:!1}},methods:{getqu:function(){this.txt="",this.bal=!1},getg:function(){""!=this.txt?this.bool=!0:this.bool=!1},getgain:function(){var t=this;if(this.bal=!0,this.searchbol=!0,""!=this.txt){if(this.http.get("http://elm.cangdu.org/v4/restaurants?extras[]=restaurant_activity&geohash="+this.geohash+"&keyword="+this.txt+"&type=search").then(function(s){console.log(s),0==s.length&&"搜索餐馆数据失败"==s.message||(t.merchant=s,t.bol=!0,t.bal=!0),0!=s.length&&"搜索餐馆数据失败"!=s.message||(t.bol=!1)}),localStorage.getItem("gethistory")&&(this.searchhistory=JSON.parse(localStorage.getItem("gethistory"))),0==this.searchhistory.length)this.searchhistory.push(this.txt),localStorage.setItem("gethistory",i()(this.searchhistory));else 0==this.searchhistory.filter(function(s){return s==t.txt}).length&&(this.searchhistory.push(this.txt),localStorage.setItem("gethistory",i()(this.searchhistory)))}},getdate1:function(){this.searchhistory=[],localStorage.setItem("gethistory",i()(this.searchhistory)),this.searchbol=!1},getdate2:function(t){this.searchhistory.splice(t,1),localStorage.setItem("gethistory",i()(this.searchhistory)),0==this.searchhistory.length&&(this.searchbol=!1)},gettxt:function(t){this.txt=t,this.getgain()}},mounted:function(){if(localStorage.getItem("geta")){var t=JSON.parse(localStorage.getItem("geta"));for(var s in t)this.geohash=t[s].geohash,console.log(this.geohash)}localStorage.getItem("gethistory")&&(this.searchhistory=JSON.parse(localStorage.getItem("gethistory")),0==this.searchhistory.length?this.searchbol=!1:(this.searchbol=!0,this.bal=!1))},watch:{txt:function(){""!=this.txt?this.bool=!0:(this.bool=!1,this.bal=!1)}}},n={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",[e("Head",{attrs:{headback:"false",headto:"true",bol:"搜索"}}),t._v(" "),e("div",{staticClass:"content"},[e("div",{staticClass:"shopsearch"},[e("input",{directives:[{name:"model",rawName:"v-model",value:t.txt,expression:"txt"}],attrs:{type:"text",placeholder:"请输入商家或美食名称"},domProps:{value:t.txt},on:{focus:function(s){return t.getg()},input:function(s){s.target.composing||(t.txt=s.target.value)}}}),t._v(" "),t.bool?e("i",{staticClass:"iconfont iconchahao",on:{click:function(s){return t.getqu()}}}):t._e(),t._v(" "),e("button",{on:{click:function(s){return t.getgain()}}},[t._v("提交")])]),t._v(" "),t.searchbol?e("div",{staticClass:"list"},[t.bal?e("ul",{staticClass:"list1"},[t.bol?e("li",{staticClass:"seashop"},[t._v("商家")]):t._e(),t._v(" "),t._l(t.merchant,function(s,a){return t.bol?e("li",{key:a,staticClass:"searchlist"},[e("img",{attrs:{src:"//elm.cangdu.org/img/"+s.image_path,alt:""}}),t._v(" "),e("div",[e("p",{staticClass:"p1"},[t._v("\n                      "+t._s(s.name)+"\n                      "),e("svg",{staticClass:"pay_icon",attrs:{"data-v-3726cde6":"",xmlns:"http://www.w3.org/2000/svg",version:"1.1",width:"24",height:"14"}},[e("polygon",{staticStyle:{fill:"none",stroke:"rgb(255, 96, 0)","stroke-width":"1"},attrs:{"data-v-3726cde6":"",points:"0,14 4,0 24,0 20,14"}}),t._v(" "),e("line",{staticStyle:{stroke:"rgb(255, 96, 0)","stroke-width":"1.5"},attrs:{"data-v-3726cde6":"",x1:"1.5",y1:"12",x2:"20",y2:"12"}}),t._v(" "),e("text",{staticStyle:{fill:"rgb(255, 96, 0)","font-size":"9px","font-weight":"bold"},attrs:{"data-v-3726cde6":"",x:"3.5",y:"9"}},[t._v("支付")])])]),t._v(" "),e("p",{staticClass:"p2"},[t._v("月售"+t._s(s.recent_order_num)+"单")]),t._v(" "),e("p",{staticClass:"p2"},[t._v(t._s(s.float_minimum_order_amount)+"元起送 / 距离"+t._s(s.distance))])])]):t._e()}),t._v(" "),t.bol?t._e():e("li",{staticClass:"sorry"},[t._v("很抱歉！无搜索结果")])],2):t._e(),t._v(" "),t.bal?t._e():e("div",{staticClass:"list2"},[e("p",[t._v("搜索历史")]),t._v(" "),e("ul",[t._l(t.searchhistory,function(s,a){return e("li",{key:a},[e("span",{on:{click:function(e){return t.gettxt(s)}}},[t._v(t._s(s))]),t._v(" "),e("i",{staticClass:"iconfont iconchahao",on:{click:function(s){return t.getdate2(a)}}})])}),t._v(" "),e("li",{staticClass:"date1",on:{click:function(s){return t.getdate1()}}},[e("span",[t._v("清空搜索记录")])])],2)])]):t._e()]),t._v(" "),e("Foot")],1)},staticRenderFns:[]};var c=e("C7Lr")(h,n,!1,function(t){e("Y//O")},"data-v-597dda4c",null);s.default=c.exports}});
//# sourceMappingURL=11.650f9fdabd29525ba6a2.js.map